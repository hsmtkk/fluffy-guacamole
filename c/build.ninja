rule cc
  command = gcc -Wall -c -o $out $in

rule lib
  command = gcc -Wall -shared -fPIC -o $out $in

rule link
  command = LD_LIBRARY_PATH=. gcc -L. -o $out main.o -lcalc

build main.o: cc main.c
build libcalc.so: lib calc.c
build main.bin: link main.o libcalc.so
